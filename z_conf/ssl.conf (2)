# ssl 캐시
SSLSessionCache shmcb:/run/httpd/sslcache(512000)
SSLSessionCacheTimeout 300

<VirtualHost *:443>
  ServerName junghomun.com
  ServerAlias www.junghomun.com
  SSLEngine on
  DocumentRoot /var/www/html/build

  # Including recommended SSL configurations from Let's Encrypt
  Include /etc/letsencrypt/options-ssl-apache.conf

  # SSL certificate files
  # 새로 발급할때는 빈파일 미리 생성해놓고 letsencrypt 실행
  # SSLCertificateFile /etc/letsencrypt/live/junghomun.com/cert.pem
  # SSLCertificateKeyFile /etc/letsencrypt/live/junghomun.com/privkey.pem
  # SSLCertificateChainFile /etc/letsencrypt/live/junghomun.com/chain.pem

  ErrorLog logs/error_log
  CustomLog logs/access_log combined

  <Directory /var/www/html/build>
    Options -Indexes +FollowSymLinks
    DirectoryIndex index.html
    AllowOverride All
    Require all granted
    FallbackResource /index.html
  </Directory>

  <Proxy *>
    Require all granted
  </Proxy>

  # Proxy settings to redirect API calls to a backend server on localhost
  ProxyPass /api http://127.0.0.1:4000/api
  ProxyPassReverse /api http://127.0.0.1:4000/api

</VirtualHost>